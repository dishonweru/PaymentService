<?xml version="1.0" encoding="UTF-8"?>
<xml-api xmlns="http://ussd.infobip.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ussd.infobip.com https://sp.infobip.com/Programmes/USSD/Public/SalesToolkit/API/xml-api-v3.1.xsd">
	<configuration>
		<property name="pageNextMenu" value="#login"/>
		<property name="firstMenuName" value="#login"/>
		<property name="lastMenuName" value="#DefaultExit"/>
		<property name="sessionEndNotificationUrl" value="http://107.174.245.76:8080/ussd/exit"/>
	</configuration>
	<variables>
		<variable name="ussd_title" value="HFC mBanking" />
		<variable name="exit_message" value="Thank you for using HFC mBanking" />
		<variable name="pin_retries" value="0" />
		<variable name="endpoint_url" value="http://107.174.245.76:8080/"/>
	</variables>
	<messages>
		<input name="login">
			<text>Welcome to ${ussd_title}.Please enter your 4 digit PIN:</text>
			<store-response variable="personalPin"/>
			<ref>#loginSubmit</ref>
		</input>
		<submit name="loginSubmit">
			<method>POST</method>
			<url>${endpoint_url}ussd/stage/3</url>
			<variable>personalPin</variable>
			<variable>pin_retries</variable>
		</submit>
		<input name="wrongpin">
			<text>${pin_retries} tries remaining.Please enter your 4 digit PIN:</text>
			<store-response variable="personalPin"/>
			<ref>#loginSubmit</ref>
		</input>
		<selection name="services">
			<title>HFC mBanking</title>
			<option choice="1" ref="#account_sel" text="Check Balance"/>
			<option choice="2" ref="#myaccount" text="My Account"/>
			<store-option-text variable="serviceSelected" />
			<exit/>
			<remember-history value="true"/>
			<ref>#services</ref>
		</selection>
		<selection name="myaccount">
			<title>Select Service:</title>
			<option choice="1" ref="#ministatement" text="Mini Statement"/>
			<option choice="2" ref="#changepin" text="Change Pin"/>
			<store-option-text variable="serviceSelected" />
			<back/>
			<exit/>
			<remember-history value="true"/>
			<ref>#myaccount</ref>
		</selection>
		<submit name="serviceSubmit">
			<method>POST</method>
			<url>${endpoint_url}ussd/stage/4</url>
			<variable>personalPin</variable>
			<variable>pin_retries</variable>
			<variable>accountSelected</variable>
			<variable>serviceSelected</variable>
		</submit>
		<input name="confirmBalance">
			<text>A transaction charge of ${transactionCharge} will be incurred for this service. Enter your mPIN to proceed with ${serviceSelected} trasaction check on account ${accountSelected}</text>
			<store-response variable="personalPin"/>
			<ref>#balanceSubmit</ref>
		</input>
		<submit name="balanceSubmit">
			<method>POST</method>
			<url>${endpoint_url}ussd/stage/4</url>
			<variable>personalPin</variable>
			<variable>pin_retries</variable>
			<variable>accountSelected</variable>
		</submit>
		<selection name="balanceShow">
			<title>${account_balance}</title>
			<back/>
			<exit/>
			<ref>#balanceShow</ref>
		</selection>
		<bye language="GSM-7" name="DefaultExit">
			<text>${exit_message}</text>
		</bye>
	</messages>
</xml-api>